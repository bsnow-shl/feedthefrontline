<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content=
"HTML Tidy for Linux/x86 (vers 1st August 2004), see www.w3.org">
<title>template_find</title>
<meta name="GENERATOR" content=
"Modular DocBook HTML Stylesheet Version 1.79">
<link rel="HOME" title="Content Publishing Framework Manual" href=
"index.html">
<link rel="UP" title="Function reference" href=
"templating-funcreference.html">
<link rel="PREVIOUS" title="Function reference" href=
"templating-funcreference.html">
<link rel="NEXT" title="template_include" href=
"template-include.html">
<link rel="STYLESHEET" type="text/css" href="stylesheet.css">
<meta name="creation" content="2005-03-11T18:12:01">
</head>
<body class="REFENTRY" bgcolor="#FFFFFF" text="#000000" link=
"#0000FF" vlink="#840084" alink="#0000FF">
<div class="NAVHEADER">
<table summary="Header navigation table" width="100%" border="0"
cellpadding="0" cellspacing="0">
<tr>
<th colspan="3" align="center">Content Publishing Framework
Manual</th>
</tr>
<tr>
<td width="10%" align="left" valign="bottom"><a href=
"templating-funcreference.html" accesskey="P">Prev</a></td>
<td width="80%" align="center" valign="bottom"></td>
<td width="10%" align="right" valign="bottom"><a href=
"template-include.html" accesskey="N">Next</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<h1><a name="TEMPLATE-FIND" id=
"TEMPLATE-FIND"></a>template_find</h1>
<div class="REFNAMEDIV"><a name="AEN281" id="AEN281"></a>
<h2>Name</h2>
template_find&nbsp;--&nbsp;Searches backwards from the current
file, looking for a file to include</div>
<div class="REFSYNOPSISDIV"><a name="AEN284" id="AEN284"></a>
<h2>Synopsis</h2>
<pre class="SYNOPSIS">
    string template_find(string <tt class=
"REPLACEABLE"><i>filename</i></tt>, bool <tt class=
"REPLACEABLE"><i>current_dir_only</i></tt>=false);
    
</pre></div>
<div class="REFSECT1"><a name="AEN288" id="AEN288"></a>
<h2>Description</h2>
<p>One of the more powerful features of the templating facility is
the ability to include files into the current page, where the file
depends on which part of the site the user is looking at. This is
often use to include contextual help, or useful "you are here"
bread crumbs on web sites.</p>
<p><code class="FUNCTION">template_find()</code> is can be called
either from your part or your template files. It searches backwards
through the directory tree, beginning from through the one the part
is being served from, until it finds the filename specified, or
hits the document root.</p>
<p><tt class="REPLACEABLE"><i>filename</i></tt> is the filename to
go looking for, and <tt class=
"REPLACEABLE"><i>current_dir_only</i></tt> is a boolean indicating
whether the templating system should only search the current
directory. This function returns the path to the file if it was
found, or null if it wasn't found.</p>
<p>This would be useful, for instance, if you wish to have
different navigation features depending on where the visitor is in
the site. You might have a directory structure like so:</p>
<pre class="SCREEN">
docs/_template.html
docs/index.html

docs/ordering/menu.html
docs/ordering/index.html

docs/support/menu.html
docs/support/index.html
docs/support/faq/index.html
</pre>
<p>In _template.html you can say something like this:</p>
<pre class="SCREEN">
if (template_find('menu.html')) {
    echo '&lt;h2&gt;menu&lt;/h2&gt;';
    template_include('menu.html');
}
</pre>
<p>With this, the publishing facility will choose the appropriate
menu to display - if it's available. In <kbd class=
"USERINPUT">docs/index.html</kbd>, it won't be found, and the
interior of the above if won't run. It will find <kbd class=
"USERINPUT">support/menu.html</kbd> no matter how far down inside
<kbd class="USERINPUT">support</kbd> the part being served is.</p>
<p>See also <a href=
"template-include.html">template_include</a>.</p>
</div>
<div class="NAVFOOTER">
<hr align="left" width="100%">
<table summary="Footer navigation table" width="100%" border="0"
cellpadding="0" cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href=
"templating-funcreference.html" accesskey="P">Prev</a></td>
<td width="34%" align="center" valign="top"><a href="index.html"
accesskey="H">Home</a></td>
<td width="33%" align="right" valign="top"><a href=
"template-include.html" accesskey="N">Next</a></td>
</tr>
<tr>
<td width="33%" align="left" valign="top">Function reference</td>
<td width="34%" align="center" valign="top"><a href=
"templating-funcreference.html" accesskey="U">Up</a></td>
<td width="33%" align="right" valign="top">template_include</td>
</tr>
</table>
</div>
</body>
</html>
